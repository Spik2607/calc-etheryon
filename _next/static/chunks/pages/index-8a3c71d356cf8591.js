(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(2615)}])},2615:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return T}});var s=a(5893),l=a(7294),t=a(5480),n=a(3114);function i(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter(Boolean).join(" ")}let c=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:r,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});c.displayName="Card";let o=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:r,className:i("flex flex-col space-y-1.5 p-6",a),...l})});o.displayName="CardHeader";let d=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:r,className:i("text-2xl font-semibold leading-none tracking-tight",a),...l})});d.displayName="CardTitle";let m=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:r,className:i("p-6 pt-0",a),...l})});m.displayName="CardContent";let u=l.forwardRef((e,r)=>{let{className:a,type:l,...t}=e;return(0,s.jsx)("input",{type:l,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...t})});u.displayName="Input";var x=a(8426);let f={base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},b=l.forwardRef((e,r)=>{let{className:a,variant:l="default",size:t="default",asChild:n=!1,...c}=e,o=n?x.g7:"button";return(0,s.jsx)(o,{className:i(f.base,f.variant[l],f.size[t],a),ref:r,...c})});b.displayName="Button";var h=a(5342);let p=l.forwardRef((e,r)=>{let{className:a,children:l,...t}=e;return(0,s.jsxs)(h.fC,{ref:r,className:i("relative overflow-hidden",a),...t,children:[(0,s.jsx)(h.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,s.jsx)(N,{}),(0,s.jsx)(h.Ns,{})]})});p.displayName=h.fC.displayName;let N=l.forwardRef((e,r)=>{let{className:a,orientation:l="vertical",...t}=e;return(0,s.jsx)(h.gb,{ref:r,orientation:l,className:i("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...t,children:(0,s.jsx)(h.q4,{className:"relative flex-1 rounded-full bg-border"})})});N.displayName=h.gb.displayName;var g=a(4646),v=a(3742);let y=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,s.jsx)(g.fC,{ref:r,className:i("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,s.jsx)(g.z$,{className:i("flex items-center justify-center text-current"),children:(0,s.jsx)(v.Z,{className:"h-4 w-4"})})})});y.displayName=g.fC.displayName;var j=a(9455),w=a(6291),C=a(9560),k=a(3231),A=a(7420),R=a(4998),_=a(6583);let D=[{name:"Eau",icon:"\uD83D\uDCA7",color:"text-blue-500"},{name:"Feu",icon:"\uD83D\uDD25",color:"text-red-500"},{name:"Terre",icon:"\uD83C\uDF0D",color:"text-green-500"},{name:"Air",icon:"\uD83C\uDF2A️",color:"text-gray-500"},{name:"Foudre",icon:"⚡",color:"text-yellow-500"}],E={started:!1,ended:!1,playerCount:3,currentPlayer:0,currentRound:1,playerNames:Array(8).fill(""),elementScores:[],scores:[],masteryBonus:Array(7).fill(-1)};var M=()=>{let[e,r]=(0,l.useState)({...E}),{started:a,ended:i,playerCount:x,currentPlayer:f,currentRound:h,playerNames:N,elementScores:g,scores:v,masteryBonus:y}=e,M=(0,l.useCallback)(e=>{r(r=>({...r,playerCount:e,playerNames:r.playerNames.map((r,a)=>a<e?r:"")}))},[]),S=(0,l.useCallback)((e,a)=>{r(r=>({...r,playerNames:r.playerNames.map((r,s)=>s===e?a:r)}))},[]),T=(0,l.useCallback)(e=>{if(!(null==e?void 0:e.length))return 0;let r=Math.max(...e);return e.reduce((e,a)=>a===r?e:e-a,r)},[]),Z=(0,l.useCallback)(()=>{r(e=>({...e,started:!0,elementScores:Array(e.playerCount).fill().map(()=>Array(7).fill().map(()=>Array(D.length).fill(0))),scores:Array(e.playerCount).fill().map(()=>Array(7).fill(0))}))},[]),H=(0,l.useCallback)((e,a,s,l)=>{let t=Math.max(0,parseInt(l)||0);r(r=>{let l=[...r.elementScores];l[e]||(l[e]=Array(7).fill().map(()=>Array(D.length).fill(0))),l[e][a][s]=t;let n=[...r.scores];return n[e]=n[e]||Array(7).fill(0),n[e][a]=T(l[e][a]),{...r,elementScores:l,scores:n}})},[T]);(0,l.useCallback)((e,a)=>{r(r=>{let s=[...r.masteryBonus],l=s[e];s[e]=l===a?-1:a;let t=r.scores.map((r,s)=>r.map((r,t)=>t!==e?r:s===l?r-15:s===a&&l!==a?r+15:r));return{...r,masteryBonus:s,scores:t}})},[]);let P=(0,l.useCallback)(e=>{var r;return(null===(r=v[e])||void 0===r?void 0:r.reduce((e,r)=>e+(r||0),0))||0},[v]),B=(0,l.useCallback)(()=>{r(e=>{let r=(e.currentPlayer+1)%e.playerCount,a=0===r?e.currentRound+1:e.currentRound;return{...e,currentPlayer:r,currentRound:a,ended:a>7}})},[]);(0,l.useCallback)(()=>{r({...E})},[]);let F=(0,l.useMemo)(()=>(0,s.jsxs)(c,{className:"medieval-card border-2 border-amber-900",children:[(0,s.jsx)(o,{className:"bg-amber-900 text-amber-50",children:(0,s.jsxs)(d,{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5"}),"Tableau des Scores"]})}),(0,s.jsx)(m,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-amber-800 text-amber-50",children:[(0,s.jsx)("th",{className:"border border-amber-900 p-2",children:"H\xe9ros"}),Array.from({length:7},(e,r)=>(0,s.jsxs)("th",{className:"border border-amber-900 p-2",children:["M",r+1]},r)),(0,s.jsx)("th",{className:"border border-amber-900 p-2",children:"Total"})]})}),(0,s.jsx)("tbody",{children:N.slice(0,x).map((e,r)=>(0,s.jsxs)("tr",{className:"\n                    ".concat(f===r?"bg-amber-50":"bg-amber-100/50","\n                    hover:bg-amber-200/50 transition-colors\n                  "),children:[(0,s.jsx)("td",{className:"border border-amber-900 p-2 font-semibold",children:e||"H\xe9ros ".concat(r+1)}),Array.from({length:7},(e,a)=>{var l;return(0,s.jsx)("td",{className:"border border-amber-900 p-2 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(null===(l=v[r])||void 0===l?void 0:l[a])||0,y[a]===r&&(0,s.jsx)(C.Z,{className:"h-4 w-4 text-amber-500 mt-1"})]})},a)}),(0,s.jsx)("td",{className:"border border-amber-900 p-2 text-center font-bold",children:P(r)})]},r))})]})})})]}),[N,x,f,v,y,P]),z=(0,l.useMemo)(()=>(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:D.map((e,r)=>{var a,l;return(0,s.jsxs)("div",{className:"medieval-input-group",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-1 flex items-center gap-2",children:[(0,s.jsx)("span",{className:e.color,children:e.icon}),(0,s.jsx)("span",{children:e.name})]}),(0,s.jsx)(u,{type:"number",min:"0",value:(null===(l=g[f])||void 0===l?void 0:null===(a=l[h-1])||void 0===a?void 0:a[r])||0,onChange:e=>H(f,h-1,r,e.target.value),className:"medieval-input text-center"})]},r)})}),[g,f,h,H]);return(0,s.jsxs)("div",{className:"min-h-screen bg-amber-50",children:[(0,s.jsx)("header",{className:"bg-amber-900 text-amber-50 p-4 shadow-lg",children:(0,s.jsx)("div",{className:"container mx-auto flex items-center justify-between",children:(0,s.jsxs)("h1",{className:"text-2xl md:text-3xl font-medieval flex items-center gap-2",children:[(0,s.jsx)(w.Z,{className:"h-6 w-6 md:h-8 md:w-8"}),"Calculatrice Etheryon",(0,s.jsx)(j.Z,{className:"h-6 w-6 md:h-8 md:w-8"})]})})}),(0,s.jsx)("main",{className:"container mx-auto p-4",children:(0,s.jsx)(n.M,{mode:"wait",children:a?(0,s.jsxs)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)(c,{className:"w-full md:w-2/3 medieval-card border-2 border-amber-900",children:[(0,s.jsx)(o,{className:"bg-amber-900 text-amber-50",children:(0,s.jsxs)(d,{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(A.Z,{className:"h-5 w-5"}),"Tour de ".concat(N[f]," - Manche ").concat(h)]})}),(0,s.jsxs)(m,{className:"space-y-6 p-4",children:[z,(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(b,{onClick:B,className:"bg-amber-900 text-amber-50 hover:bg-amber-800",children:f<x-1?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["H\xe9ros Suivant",(0,s.jsx)(R.Z,{className:"h-4 w-4"})]}):h<7?"Manche Suivante":"Terminer la Partie"})})]})]}),(0,s.jsx)("div",{className:"w-full md:w-1/3",children:F})]},"game"):(0,s.jsxs)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)(c,{className:"w-full md:w-2/3 medieval-card border-2 border-amber-900",children:[(0,s.jsx)(o,{className:"bg-amber-900 text-amber-50",children:(0,s.jsxs)(d,{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(_.Z,{className:"h-5 w-5"}),"Cr\xe9ation des H\xe9ros"]})}),(0,s.jsxs)(m,{className:"space-y-6 p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Nombre de H\xe9ros :"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[2,3,4,5,6,7,8].map(e=>(0,s.jsx)(b,{onClick:()=>M(e),variant:x===e?"default":"outline",className:"\n                            ".concat(x===e?"bg-amber-900 text-amber-50":"border-amber-900 text-amber-900","\n                          "),children:e},e))})]}),(0,s.jsx)(p,{className:"h-64 border rounded-lg p-4",children:(0,s.jsx)("div",{className:"space-y-4",children:N.slice(0,x).map((e,r)=>(0,s.jsx)(u,{placeholder:"Nom du H\xe9ros ".concat(r+1),value:e,onChange:e=>S(r,e.target.value),className:"medieval-input"},r))})}),(0,s.jsx)(b,{onClick:Z,disabled:N.slice(0,x).some(e=>!e),className:"w-full bg-amber-900 text-amber-50 hover:bg-amber-800",children:"Commencer l'Aventure"})]})]}),(0,s.jsx)("div",{className:"w-full md:w-1/3",children:F})]},"setup")})})]})},S=a(1571);function T(){let{theme:e}=(0,S.F)();return(0,s.jsx)("div",{className:"min-h-screen bg-background ".concat("dark"===e?"dark":""),children:(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)(c,{className:"w-full max-w-4xl mx-auto",children:(0,s.jsx)(M,{})})})})})}}},function(e){e.O(0,[238,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);