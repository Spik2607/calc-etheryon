(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(9887)}])},9887:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return w}});var r=l(5893),t=l(7294),s=l(6675),n=l(3231),i=l(9560),c=l(9525);function o(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.filter(Boolean).join(" ")}let d=t.forwardRef((e,a)=>{let{className:l,type:t,...s}=e;return(0,r.jsx)("input",{type:t,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:a,...s})});d.displayName="Input";var u=l(8426);let m={base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},f=t.forwardRef((e,a)=>{let{className:l,variant:t="default",size:s="default",asChild:n=!1,...i}=e,c=n?u.g7:"button";return(0,r.jsx)(c,{className:o(m.base,m.variant[t],m.size[s],l),ref:a,...i})});f.displayName="Button";var x=l(1165);let h=t.forwardRef((e,a)=>{let{className:l,children:t,...s}=e;return(0,r.jsxs)(x.fC,{ref:a,className:o("relative overflow-hidden",l),...s,children:[(0,r.jsx)(x.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(p,{}),(0,r.jsx)(x.Ns,{})]})});h.displayName=x.fC.displayName;let p=t.forwardRef((e,a)=>{let{className:l,orientation:t="vertical",...s}=e;return(0,r.jsx)(x.gb,{ref:a,orientation:t,className:o("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",l),...s,children:(0,r.jsx)(x.q4,{className:"relative flex-1 rounded-full bg-border"})})});p.displayName=x.gb.displayName;let b=[{name:"Eau",icon:"\uD83D\uDCA7",color:"text-blue-500",label:"⚈"},{name:"Feu",icon:"\uD83D\uDD25",color:"text-red-500",label:"\uD83D\uDD25"},{name:"Terre",icon:"\uD83C\uDF0D",color:"text-green-500",label:"◉"},{name:"Air",icon:"\uD83C\uDF2A️",color:"text-gray-500",label:"☁"},{name:"Foudre",icon:"⚡",color:"text-yellow-500",label:"⚡"}];var v=()=>{let[e,a]=(0,t.useState)(!1),[l,s]=(0,t.useState)(3),[o,u]=(0,t.useState)(Array(8).fill("")),[m,f]=(0,t.useState)(0),[x,p]=(0,t.useState)(1),[v,j]=(0,t.useState)([]),[g,N]=(0,t.useState)([]),[y,C]=(0,t.useState)(!1),[w,k]=(0,t.useState)(Array(8).fill(0)),[A,D]=(0,t.useState)(Array(7).fill(-1)),_=(0,t.useCallback)(e=>{s(e),u(a=>{let l=[...a];return l.length=e,l.fill("",a.length,e)}),k(Array(e).fill(0))},[]),S=(0,t.useCallback)((e,a)=>{u(l=>{let r=[...l];return r[e]=a,r})},[]),M=(0,t.useCallback)((e,a)=>{k(l=>{let r=[...l];return r[e]=a,r})},[]),R=(0,t.useCallback)(()=>{N(Array(l).fill().map(()=>Array(7).fill().map(()=>Array(b.length).fill(0)))),j(Array(l).fill().map(()=>Array(7).fill(0))),D(Array(7).fill(-1)),a(!0)},[l]),E=(0,t.useCallback)(e=>{if(!e||0===e.length)return 0;let a=Math.max(...e);return e.reduce((e,l)=>l===a?e:e-l,a)},[]),T=(0,t.useCallback)((e,a,l,r)=>{let t=Math.max(0,parseInt(r)||0);N(r=>{let s=[...r];return s[e]||(s[e]=Array(7).fill().map(()=>Array(b.length).fill(0))),s[e][a][l]=t,s}),j(r=>{let s=[...r];s[e]||(s[e]=Array(7).fill(0));let n=g[e][a].map((e,a)=>a===l?t:e);return s[e][a]=E(n),s})},[E,g]),q=(0,t.useCallback)((e,a)=>{A[e]===a?(D(a=>{let l=[...a];return l[e]=-1,l}),j(l=>l.map((l,r)=>r===a?l.map((a,l)=>l===e?a-15:a):l))):(D(l=>{let r=[...l],t=r[e];return -1!==t&&j(a=>a.map((a,l)=>l===t?a.map((a,l)=>l===e?a-15:a):a)),r[e]=a,r}),j(l=>l.map((l,r)=>r===a?l.map((a,l)=>l===e?a+15:a):l)))},[]),F=(0,t.useCallback)(e=>(v[e]||[]).reduce((e,a)=>e+(a||0),0),[v]),z=(0,t.useCallback)(e=>o.reduce((a,l,r)=>w[r]===e?a+F(r):a,0),[w,F,o]);return e?(0,r.jsx)("div",{className:"calculator-container",children:(0,r.jsxs)("div",{className:"game-section",children:[(0,r.jsxs)("h2",{className:"medieval-title flex items-center justify-center gap-2 mb-6",children:[(0,r.jsx)(n.Z,{className:"h-6 w-6"}),"Tour de ",o[m]," - Manche ",x]}),(0,r.jsx)("div",{className:"elements-grid",children:b.map((e,a)=>{var l,t;return(0,r.jsxs)("div",{className:"element-input",children:[(0,r.jsx)("span",{className:"element-icon ".concat(e.color),children:e.label}),(0,r.jsx)("span",{className:"element-name",children:e.name}),(0,r.jsx)(d,{type:"number",min:"0",value:(null===(t=g[m])||void 0===t?void 0:null===(l=t[x-1])||void 0===l?void 0:l[a])||0,onChange:e=>T(m,x-1,a,e.target.value),className:"medieval-input"})]},a)})}),(0,r.jsxs)("table",{className:"scores-table mt-6",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Joueur"}),Array.from({length:7},(e,a)=>(0,r.jsxs)("th",{children:["M",a+1]},a)),(0,r.jsx)("th",{children:"Total"})]})}),(0,r.jsxs)("tbody",{children:[o.slice(0,l).map((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"player-name",children:[e," ",y&&"(\xc9quipe ".concat(w[a],")")]}),Array.from({length:7},(e,l)=>{var t;return(0,r.jsx)("td",{className:"score-cell",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(null===(t=v[a])||void 0===t?void 0:t[l])||0,(0,r.jsx)("button",{onClick:()=>q(l,a),className:"mastery-button ".concat(A[l]===a?"active":""),children:(0,r.jsx)(i.Z,{className:"h-4 w-4 ".concat(A[l]===a?"text-yellow-500":"text-gray-400")})})]})},l)}),(0,r.jsx)("td",{className:"total-score",children:F(a)})]},a)),y&&(0,r.jsxs)("tr",{className:"team-totals",children:[(0,r.jsx)("td",{colSpan:8,children:"Totaux par \xe9quipe"}),(0,r.jsx)("td",{children:Array.from({length:4},(e,a)=>a+1).map(e=>(0,r.jsxs)("div",{children:["\xc9quipe ",e,": ",z(e)]},e))})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end mt-4",children:(0,r.jsx)("button",{onClick:()=>{m<l-1?f(m+1):(f(0),x<7&&p(x+1))},className:"medieval-button",children:m<l-1?"Joueur suivant":"Manche suivante"})})]})}):(0,r.jsx)("div",{className:"calculator-container",children:(0,r.jsxs)("div",{className:"game-section",children:[(0,r.jsxs)("h2",{className:"medieval-title flex items-center justify-center gap-2 mb-6",children:[(0,r.jsx)(c.Z,{className:"h-6 w-6"}),"Configuration de la partie"]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"medieval-label block mb-2",children:"Nombre de joueurs :"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[2,3,4,5,6,7,8].map(e=>(0,r.jsx)("button",{onClick:()=>_(e),className:"medieval-button ".concat(l===e?"medieval-button-active":""),children:e},e))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:y,onChange:e=>C(e.target.checked),className:"medieval-checkbox",id:"teamMode"}),(0,r.jsx)("label",{htmlFor:"teamMode",className:"medieval-label",children:"Mode \xe9quipe"})]}),(0,r.jsx)(h,{className:"h-64 medieval-scroll",children:o.slice(0,l).map((e,a)=>(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d,{placeholder:"Nom du joueur ".concat(a+1),value:e,onChange:e=>S(a,e.target.value),className:"medieval-input"}),y&&(0,r.jsx)("select",{value:w[a],onChange:e=>M(a,parseInt(e.target.value)),className:"medieval-select",children:Array.from({length:4},(e,a)=>a+1).map(e=>(0,r.jsxs)("option",{value:e,children:["\xc9quipe ",e]},e))})]})},a))}),(0,r.jsx)("button",{onClick:R,disabled:o.slice(0,l).some(e=>!e),className:"medieval-button w-full",children:"Commencer la partie"})]})]})})};let j=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("div",{ref:a,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",l),...t})});j.displayName="Card";let g=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("div",{ref:a,className:o("flex flex-col space-y-1.5 p-6",l),...t})});g.displayName="CardHeader";let N=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("h3",{ref:a,className:o("text-2xl font-semibold leading-none tracking-tight",l),...t})});N.displayName="CardTitle";let y=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("div",{ref:a,className:o("p-6 pt-0",l),...t})});y.displayName="CardContent";var C=l(1571);function w(){let{theme:e}=(0,C.F)();return(0,r.jsx)("div",{className:"min-h-screen bg-background ".concat("dark"===e?"dark":""),children:(0,r.jsx)("div",{className:"container mx-auto p-4",children:(0,r.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,r.jsx)(j,{className:"w-full max-w-4xl mx-auto",children:(0,r.jsx)(v,{})})})})})}}},function(e){e.O(0,[26,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);