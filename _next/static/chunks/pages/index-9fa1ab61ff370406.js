(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(9887)}])},9887:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return k}});var r=l(5893),t=l(7294),s=l(6675),n=l(3231),i=l(9560),c=l(9525);function o(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.filter(Boolean).join(" ")}let d=t.forwardRef((e,a)=>{let{className:l,type:t,...s}=e;return(0,r.jsx)("input",{type:t,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:a,...s})});d.displayName="Input";var u=l(8426);let m={base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},x=t.forwardRef((e,a)=>{let{className:l,variant:t="default",size:s="default",asChild:n=!1,...i}=e,c=n?u.g7:"button";return(0,r.jsx)(c,{className:o(m.base,m.variant[t],m.size[s],l),ref:a,...i})});x.displayName="Button";var f=l(1165);let h=t.forwardRef((e,a)=>{let{className:l,children:t,...s}=e;return(0,r.jsxs)(f.fC,{ref:a,className:o("relative overflow-hidden",l),...s,children:[(0,r.jsx)(f.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(b,{}),(0,r.jsx)(f.Ns,{})]})});h.displayName=f.fC.displayName;let b=t.forwardRef((e,a)=>{let{className:l,orientation:t="vertical",...s}=e;return(0,r.jsx)(f.gb,{ref:a,orientation:t,className:o("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",l),...s,children:(0,r.jsx)(f.q4,{className:"relative flex-1 rounded-full bg-border"})})});b.displayName=f.gb.displayName;let p=[{name:"Eau",icon:"\uD83D\uDCA7",color:"text-blue-500",label:"⚈"},{name:"Feu",icon:"\uD83D\uDD25",color:"text-red-500",label:"\uD83D\uDD25"},{name:"Terre",icon:"\uD83C\uDF0D",color:"text-green-500",label:"◉"},{name:"Air",icon:"\uD83C\uDF2A️",color:"text-gray-500",label:"☁"},{name:"Foudre",icon:"⚡",color:"text-yellow-500",label:"⚡"}];var v=()=>{let[e,a]=(0,t.useState)(!1),[l,s]=(0,t.useState)(!1),[o,u]=(0,t.useState)(3),[m,x]=(0,t.useState)(Array(8).fill("")),[f,b]=(0,t.useState)(0),[v,j]=(0,t.useState)(1),[g,N]=(0,t.useState)([]),[y,C]=(0,t.useState)([]),[k,w]=(0,t.useState)(!1),[A,D]=(0,t.useState)(Array(8).fill(0)),[_,S]=(0,t.useState)(Array(7).fill(-1)),M=(0,t.useCallback)(e=>{u(e),x(a=>{let l=[...a];return l.length=e,l.fill("",a.length,e)}),D(Array(e).fill(0))},[]),R=(0,t.useCallback)((e,a)=>{x(l=>{let r=[...l];return r[e]=a,r})},[]),q=(0,t.useCallback)((e,a)=>{D(l=>{let r=[...l];return r[e]=a,r})},[]),E=(0,t.useCallback)(()=>{C(Array(o).fill().map(()=>Array(7).fill().map(()=>Array(p.length).fill(0)))),N(Array(o).fill().map(()=>Array(7).fill(0))),S(Array(7).fill(-1)),a(!0),s(!1),b(0),j(1)},[o]),T=(0,t.useCallback)(()=>{a(!1),s(!1),b(0),j(1),N([]),C([]),S(Array(7).fill(-1)),x(Array(8).fill("")),D(Array(8).fill(0)),w(!1),u(3)},[]),F=(0,t.useCallback)(()=>7===v&&f===o-1,[v,f,o]),O=(0,t.useCallback)(e=>{if(!e||0===e.length)return 0;let a=Math.max(...e);return e.reduce((e,l)=>l===a?e:e-l,a)},[]),z=(0,t.useCallback)((e,a,l,r)=>{let t=Math.max(0,parseInt(r)||0);C(r=>{let s=[...r];return s[e]||(s[e]=Array(7).fill().map(()=>Array(p.length).fill(0))),s[e][a][l]=t,s}),N(r=>{let s=[...r];s[e]||(s[e]=Array(7).fill(0));let n=y[e][a].map((e,a)=>a===l?t:e);return s[e][a]=O(n),s})},[O,y]),I=(0,t.useCallback)((e,a)=>{_[e]===a?(S(a=>{let l=[...a];return l[e]=-1,l}),N(l=>l.map((l,r)=>r===a?l.map((a,l)=>l===e?a-15:a):l))):(S(l=>{let r=[...l],t=r[e];return -1!==t&&N(a=>a.map((a,l)=>l===t?a.map((a,l)=>l===e?a-15:a):a)),r[e]=a,r}),N(l=>l.map((l,r)=>r===a?l.map((a,l)=>l===e?a+15:a):l)))},[]),Z=(0,t.useCallback)(e=>(g[e]||[]).reduce((e,a)=>e+(a||0),0),[g]),B=(0,t.useCallback)(e=>m.reduce((a,l,r)=>A[r]===e?a+Z(r):a,0),[A,Z,m]),J=(0,t.useCallback)(()=>{if(k){let e={};for(let a=1;a<=4;a++)e[a]=B(a);let a=Math.max(...Object.values(e)),l=Object.entries(e).filter(e=>{let[l,r]=e;return r===a}).map(e=>{let[a]=e;return"\xc9quipe ".concat(a)});return l.join(" et ")}{let e=m.slice(0,o).map((e,a)=>Z(a)),a=Math.max(...e),l=m.filter((e,l)=>Z(l)===a);return l.join(" et ")}},[k,B,m,o,Z]),P=(0,t.useCallback)(()=>{if(F()){s(!0);return}f<o-1?b(e=>e+1):(b(0),v<7&&j(e=>e+1))},[f,o,v,F]);return e?(0,r.jsx)("div",{className:"calculator-container",children:(0,r.jsxs)("div",{className:"game-section",children:[(0,r.jsxs)("h2",{className:"medieval-title flex items-center justify-center gap-2 mb-6",children:[(0,r.jsx)(n.Z,{className:"h-6 w-6"}),l?"R\xe9sultats finaux":"Tour de ".concat(m[f]," - Manche ").concat(v)]}),!l&&(0,r.jsx)("div",{className:"elements-grid",children:p.map((e,a)=>{var l,t;return(0,r.jsxs)("div",{className:"element-input",children:[(0,r.jsx)("span",{className:"element-icon ".concat(e.color),children:e.label}),(0,r.jsx)("span",{className:"element-name",children:e.name}),(0,r.jsx)(d,{type:"number",min:"0",value:(null===(t=y[f])||void 0===t?void 0:null===(l=t[v-1])||void 0===l?void 0:l[a])||0,onChange:e=>z(f,v-1,a,e.target.value),className:"medieval-input"})]},a)})}),(0,r.jsxs)("table",{className:"scores-table mt-6",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Joueur"}),Array.from({length:7},(e,a)=>(0,r.jsxs)("th",{children:["M",a+1]},a)),(0,r.jsx)("th",{children:"Total"})]})}),(0,r.jsxs)("tbody",{children:[m.slice(0,o).map((e,a)=>(0,r.jsxs)("tr",{className:f!==a||l?"":"current-player",children:[(0,r.jsxs)("td",{className:"player-name",children:[e," ",k&&"(\xc9quipe ".concat(A[a],")")]}),Array.from({length:7},(e,t)=>{var s;return(0,r.jsx)("td",{className:"score-cell",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(null===(s=g[a])||void 0===s?void 0:s[t])||0,(0,r.jsx)("button",{onClick:()=>I(t,a),disabled:l,className:"mastery-button ".concat(_[t]===a?"active":""),children:(0,r.jsx)(i.Z,{className:"h-4 w-4 ".concat(_[t]===a?"text-yellow-500":"text-gray-400")})})]})},t)}),(0,r.jsx)("td",{className:"total-score",children:Z(a)})]},a)),k&&(0,r.jsxs)("tr",{className:"team-totals",children:[(0,r.jsx)("td",{colSpan:8,children:"Totaux par \xe9quipe"}),(0,r.jsx)("td",{children:Array.from({length:4},(e,a)=>a+1).map(e=>(0,r.jsxs)("div",{children:["\xc9quipe ",e,": ",B(e)]},e))})]})]})]}),l?(0,r.jsxs)("div",{className:"mt-6 text-center",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold mb-4",children:[k?"\xc9quipe gagnante":"Gagnant"," : ",J()]}),(0,r.jsx)("button",{onClick:T,className:"medieval-button",children:"Nouvelle partie"})]}):(0,r.jsx)("div",{className:"flex justify-end mt-4",children:(0,r.jsx)("button",{onClick:P,className:"medieval-button",children:f<o-1?"Joueur suivant":"Manche suivante"})})]})}):(0,r.jsx)("div",{className:"calculator-container",children:(0,r.jsxs)("div",{className:"game-section",children:[(0,r.jsxs)("h2",{className:"medieval-title flex items-center justify-center gap-2 mb-6",children:[(0,r.jsx)(c.Z,{className:"h-6 w-6"}),"Configuration de la partie"]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"medieval-label block mb-2",children:"Nombre de joueurs :"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[2,3,4,5,6,7,8].map(e=>(0,r.jsx)("button",{onClick:()=>M(e),className:"medieval-button ".concat(o===e?"medieval-button-active":""),children:e},e))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:k,onChange:e=>w(e.target.checked),className:"medieval-checkbox",id:"teamMode"}),(0,r.jsx)("label",{htmlFor:"teamMode",className:"medieval-label",children:"Mode \xe9quipe"})]}),(0,r.jsx)(h,{className:"h-64 medieval-scroll",children:m.slice(0,o).map((e,a)=>(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d,{placeholder:"Nom du joueur ".concat(a+1),value:e,onChange:e=>R(a,e.target.value),className:"medieval-input"}),k&&(0,r.jsx)("select",{value:A[a],onChange:e=>q(a,parseInt(e.target.value)),className:"medieval-select",children:Array.from({length:4},(e,a)=>a+1).map(e=>(0,r.jsxs)("option",{value:e,children:["\xc9quipe ",e]},e))})]})},a))}),(0,r.jsx)("button",{onClick:E,disabled:m.slice(0,o).some(e=>!e),className:"medieval-button w-full",children:"Commencer la partie"})]})]})})};let j=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("div",{ref:a,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",l),...t})});j.displayName="Card";let g=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("div",{ref:a,className:o("flex flex-col space-y-1.5 p-6",l),...t})});g.displayName="CardHeader";let N=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("h3",{ref:a,className:o("text-2xl font-semibold leading-none tracking-tight",l),...t})});N.displayName="CardTitle";let y=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,r.jsx)("div",{ref:a,className:o("p-6 pt-0",l),...t})});y.displayName="CardContent";var C=l(1571);function k(){let{theme:e}=(0,C.F)();return(0,r.jsx)("div",{className:"min-h-screen bg-background ".concat("dark"===e?"dark":""),children:(0,r.jsx)("div",{className:"container mx-auto p-4",children:(0,r.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,r.jsx)(j,{className:"w-full max-w-4xl mx-auto",children:(0,r.jsx)(v,{})})})})})}}},function(e){e.O(0,[26,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);